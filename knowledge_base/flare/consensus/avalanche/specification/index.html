
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Specification - Optakt Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../../../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../../../../stylesheets/wide.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("../../../../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#avalanche" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="Optakt Documentation" class="md-header__button md-logo" aria-label="Optakt Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Optakt Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Specification
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="Optakt Documentation" class="md-nav__button md-logo" aria-label="Optakt Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Optakt Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../process/" class="md-nav__link">
        Team Process
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../projects/" class="md-nav__link">
        Projects
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../design/" class="md-nav__link">
        Design Principles
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../../../../testing/" class="md-nav__link">
        Testing Guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Style Guidelines
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Style Guidelines" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Style Guidelines
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../style/go/" class="md-nav__link">
        Go
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../style/markdown/" class="md-nav__link">
        Markdown
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          Knowledge Base
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Knowledge Base" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Knowledge Base
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2" type="checkbox" id="__nav_7_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2">
          Flow
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Flow" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_2">
          <span class="md-nav__icon md-icon"></span>
          Flow
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../flow/specification/" class="md-nav__link">
        Specification
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_2" type="checkbox" id="__nav_7_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2_2">
          Flow Virtual Machine
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Flow Virtual Machine" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_2">
          <span class="md-nav__icon md-icon"></span>
          Flow Virtual Machine
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../flow/flow_virtual_machine/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../flow/flow_virtual_machine/registers/" class="md-nav__link">
        Registers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../flow/flow_virtual_machine/case_study/" class="md-nav__link">
        Example
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_3" type="checkbox" id="__nav_7_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2_3">
          Cadence
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Cadence" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_3">
          <span class="md-nav__icon md-icon"></span>
          Cadence
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../flow/cadence/introduction/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../flow/cadence/accounts/" class="md-nav__link">
        Accounts
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_3_3" type="checkbox" id="__nav_7_2_3_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2_3_3">
          Contracts
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Contracts" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_2_3_3">
          <span class="md-nav__icon md-icon"></span>
          Contracts
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../flow/cadence/contracts/contracts/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../flow/cadence/contracts/flow_contracts/" class="md-nav__link">
        Flow Contracts
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../flow/cadence/resources/" class="md-nav__link">
        Resources
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../flow/cadence/reference/" class="md-nav__link">
        Reference
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_2_4" type="checkbox" id="__nav_7_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_2_4">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_2_4">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../../flow/examples/flow-go-sdk/" class="md-nav__link">
        Go SDK
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3" type="checkbox" id="__nav_7_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3">
          Flare
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Flare" data-md-level="2">
        <label class="md-nav__title" for="__nav_7_3">
          <span class="md-nav__icon md-icon"></span>
          Flare
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3_1" type="checkbox" id="__nav_7_3_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3_1">
          Consensus
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Consensus" data-md-level="3">
        <label class="md-nav__title" for="__nav_7_3_1">
          <span class="md-nav__icon md-icon"></span>
          Consensus
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3_1_1" type="checkbox" id="__nav_7_3_1_1" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3_1_1">
          Avalanche
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Avalanche" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_3_1_1">
          <span class="md-nav__icon md-icon"></span>
          Avalanche
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Specification
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Specification
      </a>
      
        


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#characteristics" class="md-nav__link">
    Characteristics
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consensus-specification" class="md-nav__link">
    Consensus Specification
  </a>
  
    <nav class="md-nav" aria-label="Consensus Specification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#transaction-entangling" class="md-nav__link">
    Transaction Entangling
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#node-main-loop" class="md-nav__link">
    Node Main Loop
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#query-for-transaction" class="md-nav__link">
    Query for Transaction
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#utxo-graph" class="md-nav__link">
    UTXO Graph
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#evaluation-of-performance" class="md-nav__link">
    Evaluation of Performance
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dag-positives-in-context-of-avalanche" class="md-nav__link">
    DAG Positives in Context of Avalanche
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cryptography-bottleneck" class="md-nav__link">
    Cryptography Bottleneck
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#snowball-comparison" class="md-nav__link">
    Snowball Comparison
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7_3_1_2" type="checkbox" id="__nav_7_3_1_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7_3_1_2">
          Stellar
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Stellar" data-md-level="4">
        <label class="md-nav__title" for="__nav_7_3_1_2">
          <span class="md-nav__icon md-icon"></span>
          Stellar
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stellar/concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../stellar/specification/" class="md-nav__link">
        Specification
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../specification/" class="md-nav__link">
        Specification
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="avalanche">Avalanche</h1>
<p>An internet-scale electronic payment system, evaluated in a large scale deployment, based on the Snow family of algorithms.
Avalanche uses a DAG tree for transactions ancestry relation and some optimizations in terms of recursive query of each transaction parents and children, that are described below.
However, the validation of transaction scripts, UTXO references and related specifics is left to the application implementation.</p>
<p>A more thorough description of Avalanche specifications can be found in the <a href="https://assets-global.website-files.com/5d80307810123f5ffbb34d6e/6009805681b416f34dcae012_Avalanche%20Consensus%20Whitepaper.pdf">Avalanche Whitepaper</a>.</p>
<p>TODO: elaborate more on the introduction</p>
<h2 id="characteristics">Characteristics</h2>
<p>The Avalanche network operates with multiple single-decree instances (nodes), meaning that each instance can make a decision on only one value.
Nodes use the <a href="../concepts/#Snow-Algorithm-Group-of-Protocols">Snowball algorithm</a> for their decision-making process.
In the case of a payment system and Avalanche, the Snowball logic used to determine a value is the process of deciding whether a transaction is valid.</p>
<p>The protocol maintains the set of all known transactions using a dynamic, append-only <a href="../../../../glossary/#Directed-Acyclic-Graph-(DAG)">Directed Acyclic Graph</a> (DAG) structure.
There are two main positives from this:</p>
<ul>
<li>DAG streamlines the path on which there are no conflicting transactions — a single vote on a DAG vertex implicitly votes for all transactions on the path to the genesis vertex</li>
<li>using the same principle as Bitcoin Network (BTC), the DAG tree renders past decisions on the path of transactions as more and more difficult to undo without approval of the correct nodes</li>
</ul>
<p>The genesis block in the DAG structure is represented by the graph first link, called "genesis vertex".
This is the point where the first two edges of the graph meet.</p>
<p>When a new transaction is created, its parents are defined in the DAG structure as its ancestors and the transcation is their newly created descendant.
The parent-child relationship in DAG is not mandatory for a child transaction may not have any relation to its parents transactions outputs.
It can actually spend funds received in other transactions from its <a href="../../../../glossary/#Ancestor-Set">ancestor set</a>.
This is the set of all transactions reachable via parent edges throughout history.
Oppositely — the term "progeny" means all existing (and potentially existing) children transactions and their children.</p>
<p>The main purpose of a consensus protocol is to avoid the inclusion of conflicting transactions into the ledger.
Even though the characteristics of a conflicting transaction are defined on an application level (ex. transactions that spend same UTXO), the notion of conflict can be abstracted in order to define the conflicting set.
In Avalanche, every transaction belongs to a conflict set.
This set consists of multiple transactions that are invalid towards each other or it is a singleton set - then it contains a single transaction (in the case of a virtuous transaction).
Since reaching a consensus means to avoid any conflicts between transactions, only one transaction from each conflict set can be included in the approved path of transactions.</p>
<p>Avalanche instantiates a Snowball instance for each conflict set.
Avalanche treats the concept of repeated queries and multiple counters from Snowball taking advantage of the DAG structure.
Specifically, when a transaction <code>T</code> is queried, all of its ancestors reachable through the DAG edges from it are implicitly part of the query.
Consequently, nodes would respond positively to a query for transaction <code>T</code> only if <code>T</code> and all of its ancestors are the preferred option in their respective conflict sets.
If more than a given threshold of responders vote positively, the transaction gets a <a href="../../../../glossary/#Chit">chit</a>.
After that nodes compute their level of confidence as the sum of transaction chit and the chits its progeny, meaning they query the transaction just once and rely on new vertices and possible chits added to the progeny to build up their confidence.</p>
<p>Described ties are broken in case of preference for first-seen transactions. TODO: explain this
Chits can also be decoupled from the DAG structure, making the protocol immune to attacks where the attacker generates large padded subgraphs.</p>
<h2 id="consensus-specification">Consensus Specification</h2>
<p>Each node <code>u</code> keeps track of all transactions it has learned about in set <code>Tu</code>. The set <code>Tu</code> is <a href="../../../../glossary/#Partition-of-a-Set">partitioned</a> into mutually exclusive conflict sets — <code>PT</code> (partition of <code>T</code>), and <code>PT ∈ Tu</code>.
Since conflicts are <a href="../../../../glossary/#Transitive-Relation">transitive</a>, if <code>PTi</code> and <code>PTj</code> are conflicting, they belong to the same conflict set of transactions — <code>PTi = PTj</code>.
Conflicting transactions have the equivalence relation because they are equivocations spending the same UTXO.</p>
<p>The parent connection to <code>T'</code> from <code>T</code> is expressed as <code>T' &lt;— T</code>.
The relation <code>T' *&lt;— T</code> is its reflexive <a href="../../../../glossary/#Transitive-Closuse-of-a-Graph">transitive closure</a> meaning that there is a path from <code>T</code> to <code>T'</code>.
If <code>T' &lt;— T</code>, then every node in the system that has <code>T</code> also has <code>T'</code> and knows about the same relation <code>T' &lt;— T</code>.
If such a relation between these transactions do not exist, then no node ends up with <code>T' &lt;— T</code>.</p>
<p>DAGs built in different nodes are guaranteed to be compatible, though at any moment in time they might not have a complete view of all vertices in the system.
Each node can compute a confidence value <code>d U (T)</code> (confidence value for node <code>u</code> about transaction <code>T</code>) from the progeny as the sum of transaction T descendants chits and its own chit.
Each transaction initially has a chit of 0 before the node gets the query results.
If the node collects a threshold of α 'yes' votes from the query the value of transaction <code>T</code>, chit is set to <code>1</code>, otherwise it will remain <code>0</code>.
A chit value reflect the result from a single query of its associated transaction and becomes immutable afterwards, while confidence <code>d</code> can increase as the DAG grows by collecting more chits in its progeny.
Additionally, each node maintains its own local list of known nodes: Nu — nodes known to <code>u</code> is a subset of the set of all existing nodes: <code>Nu ⊆ N</code>.</p>
<p>Each node implements an event-driven state machine, centered around a query that serves both to solicit votes on each transaction and to notify other nodes of the existence of newly discovered transactions.
When a node <code>u</code> discovers a transaction <code>T</code> through a query, it starts a one-time query process by sampling <code>k</code> random peers and sending a message to them, after <code>T</code> is delivered to the node by the <code>onReceiveTx</code> callback.
Node <code>u</code> answers a query by checking whether each <code>T'</code> such that <code>T' *&lt;— T</code> is currently preferred among competing transactions <code>∀T'' ∈ PT'</code> from conflict set <code>P</code> of <code>T'</code>.
If every single ancestor <code>T'</code> fulfills this criterion, the transaction is said to be strongly preferred and receives a yes-vote (1).
A failure on this criterion at any <code>T'</code> yields a no-vote (0).
When <code>u</code> accumulates <code>k</code> responses, it checks whether there are <code>α</code> yes-votes for <code>T</code>, and if so grants the chit value (<code>cT = 1</code>).
This process yields a labeling of the DAG with a chit value and associated confidence for each transaction <code>T</code>.</p>
<p>Example of (chit,confidence) values:</p>
<div class="highlight"><pre><span></span><code>T1(1,6)
├── T2(1,5)
│    ├── T4(1,2) ── T8(1,1)
│    │               │
│    └────────────── T5(1,3)
│                    └──── T9(1,1)
│
└── T3(0,0)
    ├── T6(0,0)
    └── T7(0,0)
</code></pre></div>
<p>Conflict set <code>P</code> for <code>T1</code> has one element <code>T1</code>.
Conflict set <code>P</code> for <code>T2</code> and <code>T3</code> has two elements <code>{T2, T3}</code>.
Conflict set <code>P</code> for <code>T7</code>, <code>T6</code> and <code>T9</code> has 3 elements <code>{T6, T7, T9}</code>.</p>
<p>Similar to Snowball, sampling in Avalanche creates a positive feedback for the preference of a single transaction in its conflict set.
When a transaction has a larger confidence, its descendants are likely to collect chits in the future compared to others with lower confidence.
For example <code>T2</code> has higher confidence than <code>T3</code> and its descendants are more likely to collect chits in the future.</p>
<p>Similar to Bitcoin, Avalanche leaves determining the acceptance point of a transaction to the application.
Committing a transaction can be performed through a safe early commitment.
For virtuous transactions, <code>T</code> is accepted when it is the only transaction in its conflict set and has a confidence no less than a threshold of <code>β1</code>.
If a virtuous transaction fails to get accepted due to a problem with parents, it could be accepted if reissued with different parents.</p>
<h3 id="transaction-entangling">Transaction Entangling</h3>
<p>How Avalanche entangles transactions:</p>
<div class="highlight"><pre><span></span><code>init:
    `Set T` = Ø set of known transactions (empty set)
    Q = Ø set of queried transactions (empty set)

generateTx:
    edges = {T&#39; &lt;— T: T&#39; ∈ parentSelection(`Set T`)}
    T = Tx(data, edges)
    onReceiveEvent(T)

onReceiveEvent(t):
    if T ∉ `Set T` then
        if PT (conflict set of T) = Ø then
            PT = {T}, Pt.pref = T
            PT.last = T, PT.cnt = 0
        else PT = PT U {T}

        `Set T` = T U {T}, cT = 0
</code></pre></div>
<p>Because transactions that generate and consume the same UTXO do not conflict with each other, any transaction can be reissued with different parents.</p>
<h3 id="node-main-loop">Node Main Loop</h3>
<p>Protocol main loop executed by each node:</p>
<div class="highlight"><pre><span></span><code>AvalancheLoop:
    while true do
        find T that satisfies T ∈ `Set T` AND T ∉ Q
        K = sample(N\u, k)
        P = SUM(v ∈ k) query(v, T)

        if P ≥ α then
            cT = 1 (chit for transaction T)
            update preferences for ancestors:
            for T&#39; ∈ `Set T`: T&#39; *&lt;— T do
                if T&#39; confidence is larger than the confidence of preferred transation T` in the P conflict set - update the prefered transaction of the set:
                if d(T&#39;) &gt; d(PT&#39;.pref) then
                    PT&#39;.pref = T&#39;
                if T&#39; is not the last transaction in the T&#39; conflict set - update the last place with it
                if T&#39; ≠ PT&#39;.last then
                    PT&#39;.last = T&#39;, PT&#39;.cnt=1
                else
                    ++PT&#39;.cnt
        else
            for T&#39; ∈ `Set T`: T&#39; *&lt;— T do
                PT&#39;.cnt = 0

            otherwise confidence cnt remains 0 forever
            Q = Q U {T} - mark T as queried
</code></pre></div>
<p>In each iteration the node tries to select a transaction that has not yet been queried.
If no such transaction exists, the loop stalls until a new transaction is added to <code>Set T</code>.
When a the new transaction is added, the node then select a number of peers <code>k</code> and queries them.
If more than <code>α</code> of these peers return a positive response, the chit value is set to <code>1</code>.
After this step, the loop updates the preferred transaction of each conflict set of the transactions in its ancestry.
Next, <code>T</code> is added to the set <code>Q</code> of queried transactions so it is never queried again by the node.</p>
<h3 id="query-for-transaction">Query for Transaction</h3>
<p>What happens when a node receives a query for transaction <code>T</code> from peer <code>j</code>:</p>
<div class="highlight"><pre><span></span><code>isPreferred(T):
    return T = PT.pref

isStronglyPreferred(T):
    return ∀T&#39; ∈ `Set T`, T&#39; *&lt;— T : isPreferred(T&#39;)

isAccepted(T):
    return
        ((∀T&#39; ∈ `Set T`, T&#39; &lt;— T: isAccepted(T&#39;))
            ∩ |PT|=1 ∩ PT.cnt ≥ β1)  safe early commitment
        ∪ (PT.cnt ≥ β2)              consecutive counter

onQuery(j, T):
    onReceiveTx(T)
    respond(, isStronglyPreferred(T))
</code></pre></div>
<p>The first step is to add transaction <code>T</code> to <code>Set T</code> unless it is already included.
After that step, <code>u</code> determines whether <code>T</code> is currently strongly preferred, in which case <code>u</code> returns a positive response to peer <code>j</code>, otherwise it returns a negative response.
In the example pseudocode it is assumed that if a node knows about <code>T</code>, then it recursively knows about <code>T</code>'s ancestry.
This can be achieved by postponing the delivery of <code>T</code> until its entire ancestry is recursively fetched (in practice an additional gossip process that disseminates the transaction is used in parallel).</p>
<h2 id="utxo-graph">UTXO Graph</h2>
<p>In addition to the DAG structure used for transactions data, another graph is used for <a href="../../../../glossary/#UTXO-Set">Unspent Transactions Outputs (UTXO)</a> set, that captures the available outputs.
It is used to realize the ledger for the payment system.
In the present specifications transactions that encode the data for money transfer are called "transactions", and transactions <code>T ∈ Set T</code> are DAG vertices.</p>
<p>Transaction and address mechanisms are inherited from Bitcoin.
In its simplest form, a transaction consists of multiple inputs and outputs with the corresponding redeem scripts.
Addresses are identified by the hash of their public keys, and signatures are being generated by the correponding private keys.</p>
<p>UTXO are fully consumed by a valid transaction and may generate new UTXOs spendable by the named recipients.</p>
<p>Multiple-input transactions consume multiple UTXOs and in Avalanche may appear in multiple conflict sets.
The conflict relation of transaction input pairs is transitive, because each pair only spends one unspent output.
Each input of the transaction is checked by the logic of isAccepted(T) step, consequently a transaction is accepted only if all its input pairs are accepted in their respective Snowball conflict sets.
The DAG of transaction-inputs is implemented in such a way that multiple transactions can be batched together per query.</p>
<h2 id="evaluation-of-performance">Evaluation of Performance</h2>
<p>TODO: add</p>
<h2 id="dag-positives-in-context-of-avalanche">DAG Positives in Context of Avalanche</h2>
<p>TODO: add</p>
<h2 id="cryptography-bottleneck">Cryptography Bottleneck</h2>
<p>TODO: add</p>
<h2 id="snowball-comparison">Snowball Comparison</h2>
<p>TODO: add</p>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../concepts/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Concepts" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Concepts
            </div>
          </div>
        </a>
      
      
        
        <a href="../../stellar/concepts/" class="md-footer__link md-footer__link--next" aria-label="Next: Concepts" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Concepts
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 Optakt
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.sections", "toc.integrate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../../../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>