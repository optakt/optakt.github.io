
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-7.3.6">
    
    
      
        <title>Flare Architecture - Optakt Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.a57b2b03.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.3f5d1f46.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style>
      
    
    
    
      <link rel="stylesheet" href="../../stylesheets/wide.css">
    
    
      


    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo">
  
    
    <script>function __prefix(e){return new URL("../..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script>
    
      <script>var palette=__get("__palette");if(null!==palette&&"object"==typeof palette.color)for(var key in palette.color)document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#flare-architecture" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Optakt Documentation" class="md-header__button md-logo" aria-label="Optakt Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Optakt Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Flare Architecture
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="white" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Optakt Documentation" class="md-nav__button md-logo" aria-label="Optakt Documentation" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Optakt Documentation
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Overview
      </a>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Code" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../code/design/" class="md-nav__link">
        Design
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../code/go/" class="md-nav__link">
        Go
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../code/markdown/" class="md-nav__link">
        Markdown
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../code/testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Process
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Process" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Process
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../process/process/" class="md-nav__link">
        Meetings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../process/repositories/" class="md-nav__link">
        Repositories
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../process/git/" class="md-nav__link">
        Git
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Knowledge
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Knowledge" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Knowledge
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flow/" class="md-nav__link">
        Flow
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../cadence/" class="md-nav__link">
        Cadence
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../flare/" class="md-nav__link">
        Flare
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../scalinghistory/" class="md-nav__link">
        Scaling History
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../glossary/" class="md-nav__link">
        Glossary
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#avalanche-platform" class="md-nav__link">
    Avalanche Platform
  </a>
  
    <nav class="md-nav" aria-label="Avalanche Platform">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#subnets" class="md-nav__link">
    Subnets
  </a>
  
    <nav class="md-nav" aria-label="Subnets">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#p-chain" class="md-nav__link">
    P-Chain
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#c-chain" class="md-nav__link">
    C-Chain
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#x-chain" class="md-nav__link">
    X-Chain
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flares-fba" class="md-nav__link">
    Flare's FBA
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#state-connector" class="md-nav__link">
    State Connector
  </a>
  
    <nav class="md-nav" aria-label="State Connector">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#advantages" class="md-nav__link">
    Advantages
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#voting" class="md-nav__link">
    Voting
  </a>
  
    <nav class="md-nav" aria-label="Voting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#request-phase" class="md-nav__link">
    Request Phase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#commit-phase" class="md-nav__link">
    Commit Phase
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reveal-phase" class="md-nav__link">
    Reveal Phase
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#branching" class="md-nav__link">
    Branching
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#flare-time-series-oracle-ftso" class="md-nav__link">
    Flare Time Series Oracle (FTSO)
  </a>
  
    <nav class="md-nav" aria-label="Flare Time Series Oracle (FTSO)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#delegation" class="md-nav__link">
    Delegation
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rewards" class="md-nav__link">
    Rewards
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#f-asset-system" class="md-nav__link">
    F-Asset System
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
                
                <h1 id="flare-architecture">Flare Architecture</h1>
<p>This section contains information about some parts of the Flare Network.
In addition, it contains some information regarding the Avalanche platform since Flare adopted some of its parts within its ecosystem.</p>
<h2 id="avalanche-platform">Avalanche Platform</h2>
<p>Avalanche is an open-source platform for launching decentralized applications and enterprise blockchain deployments in one interoperable, highly scalable ecosystem.
It is a platform with a new approach to scaling that allows for fast finality of transactions and the ability to run Solidity out-of-the-box.</p>
<p>The most significant difference between Avalanche and other decentralized networks is the <a href="../flare/">consensus protocol</a>.
The Avalanche protocol employs a novel approach to a consensus to achieve strong safety guarantees, quick finality, and high throughput without compromising decentralization.</p>
<p>The purpose of the Avalanche platform:</p>
<ul>
<li>creation of subnets and blockchains tied to the main Avalanche network for general and corporate purposes;</li>
<li>creation and hosting of decentralized applications;</li>
<li>creation of smart assets (for example, new financial derivatives and DeFi solutions).</li>
</ul>
<h3 id="subnets">Subnets</h3>
<p>Avalanche is composed of logical entities called "subnets," and every chain from Avalanche blockchain is a part of a <em>subnet</em>.
A subnet, or subnetwork, is a dynamic set of validators working together to achieve consensus on the state of a set of blockchains.
Each blockchain is validated by one subnet, but a subnet can validate many blockchains.
The validators of each subnet must stake AVAX tokens to become a member of the network.
Clients interact with Avalanche through API calls to nodes (each chain has its <a href="https://docs.avax.network/build/avalanchego-apis/README">own API</a>).</p>
<p>There is a particular subnet called the <em>primary network</em>, which validates Avalanche's built-in blockchains.
A node may be a member of arbitrarily many subnets and must be part of the primary network.
The primary network contains three build-in blockchains: P-Chain (Platform Chain), C-Chain (Contract Chain), and X-Chain (Exchange Chain).</p>
<p>In total, the Avalanche ecosystem (as of the end of December 2021) operates <a href="https://explorer.avax.network/subnets?tab=validators">13 subnets and 10 blockchains</a> (3 main plus 7 minor ones: Dtehereum, Btehereum, C and X-chain PoW, and others).</p>
<p>All the details regarding the platform operation, tutorials, and tools are described in the <a href="https://docs.avax.network/build/tutorials/platform/create-a-subnet/.">official Avalanche website</a></p>
<h4 id="p-chain">P-Chain</h4>
<p>The Platform Chain is the metadata blockchain on Avalanche that coordinates validators, keeps track of active subnets, and enables the creation of new subnets.
The P-Chain uses a <a href="https://www.investopedia.com/terms/u/utxo.asp">UTXO</a> (Unspent Transaction Output) model and implements the Snowman consensus protocol.
Adding or removing a validator from the validator set at some given time by the P-Chain needs absolute ordering, so parallel lines of computation (DAG approach) are not allowed.</p>
<h4 id="c-chain">C-Chain</h4>
<p>With the C-Chain API, clients can create smart contracts.
It is an example of the Ethereum Virtual Machine that the Avalanche Chain powers.
The C-Chain also serves as the default smart contract blockchain of the Avalanche Chain.
C-Chain is also very compatible with the Solidity smart contract and Ethereum tooling.
Therefore, it makes it easy for Ethereum developers to port applications into the Avalanche chain easily.
C-Chain uses an account-based Snowman Consensus Protocol since an application requires a total ordering of transactions and runs consensus on blocks, not transactions.
That is, if it needs to be able to compare any two transactions and determine which came first, it can't use a DAG because the ordering of some transactions is not defined.</p>
<h4 id="x-chain">X-Chain</h4>
<p>The X-Chain functions as a decentralized network for creating and trading digital assets and uses the Avalanche consensus protocol.
The X-Chain uses a DAG with the full Avalanche consensus protocol, so it is UTXO (Unspent Transaction Output) based.
UTXO-based systems are inherently more scalable than account-based systems.
They are naturally parallelizable, whereas account-based systems must lock around the account to process transactions.
It is a real-world representation of assets such as bonds and equity with specific rules that govern their actions.
Whenever you initiate a transaction on the Avalanche blockchain, you get to pay a fee in AVAX.
The Exchange Chain is an Avalanche Virtual Machine (AVM) example.
Clients can create and trade assets on the X-Chain and other examples of the AVM with the help of the X-Chain API.</p>
<h2 id="flares-fba">Flare's FBA</h2>
<p>TODO <a href="https://github.com/optakt/optakt.github.io/issues/23">add more details to each of the items</a></p>
<p>Currently, Flare uses some parts of the Avalanche codebase with some changes:</p>
<ul>
<li>deactivate most of the P-Chain and X-Chain functionality;</li>
<li>run the C-Chain with a locally defined set of validators instead of using the P-Chain for the list of validators;</li>
<li>hijack the EVM state transition to implement Flare state connector functionality;</li>
<li>implement the rest of the Flare systems on top of the C-Chain as Solidity smart contracts.</li>
</ul>
<h2 id="state-connector">State Connector</h2>
<p>The state connector in Flare's system is designed to observe the state of underlying chains and is one of the most critical protocols on the Flare Network.
The state connector enables Flare smart contracts to act on state changes from underlying blockchains, for example, payments.
The state connector adopts other blockchains' consensus mechanisms and validator ecosystems.</p>
<h3 id="advantages">Advantages</h3>
<p>The <a href="https://docs.flare.network/en/state-connector">state connector system</a> is a competitive approach for proving the state of an underlying chain to a smart contract, and it has the following advantages:</p>
<ul>
<li>Transaction validity references back to an underlying chain's genesis block: Other approaches like the SPV (Simplified Payment Verification) proof do not check the validity of a transaction because it is considered harmful for proving the state of an underlying chain to another network.</li>
<li>Safety only depends on an underlying chain's validators: no trusted third-party service has its own set of economic incentives and risks.
  The need for trust is minimized by leveraging the guarantee that safety can only be lost in the state connector if an underlying chain's validators encounter a Byzantine fault.</li>
<li>No cooperation is needed from an underlying chain's validators: validators from an underlying chain do not need to modify their chain's codebase to permit Flare to interpret their network.
  An underlying chain's validators do not even need to know that Flare exists for the state connector system to operate.</li>
<li>Can read the state of any blockchain: the state connector can operate on any possible Sybil-resistance technique of an underlying chain.</li>
<li>Constant-sized proofs: both the data availability proof and the payment proof are constant-sized, independent of the number of other payments in the data availability period being considered.</li>
</ul>
<h3 id="voting">Voting</h3>
<p>The state connector voting protocol is split into three phases, described in the following sub-sections.</p>
<h4 id="request-phase">Request Phase</h4>
<p>Any user can submit a request to the state connector contract to have an event proven at any point in time.
From its perspective, the time window that this request enters the network state is known as the request phase.</p>
<h4 id="commit-phase">Commit Phase</h4>
<p>During the next window, attestation providers have the opportunity to commit a hidden vote regarding their belief in the outcome of the events requested in the previous phase.
Anyone may operate as an attestation provider without any capital requirement, but a default incentivized set is used as the minimal requirement for passing a vote about the events in the previous set.</p>
<h4 id="reveal-phase">Reveal Phase</h4>
<p>Finally, in the next window of time, attestation providers reveal the votes they committed to in the previous round.
Once this reveal phase concludes and the next phase begins, the revealed votes are automatically counted, and all valid events become immediately available to all contracts on Flare.
Once these criteria are met, and that data is available, the stored transactions in the storage contract are now available to be referenced by any other contract on the Flare Network.</p>
<h3 id="branching">Branching</h3>
<p>The state connector branching protocol protects Flare against the incorrect interpretation of real-world events proactively, such that there are never any rollbacks on the Flare blockchain state.
Instead of having rollbacks, contention on state correctness is handled via automatic state branching into a correct and incorrect path.
The security assumption is that if you, as an independent node operator, follow along with the correct real-world state, you will always end up on the correct branch of the blockchain state.</p>
<h2 id="flare-time-series-oracle-ftso">Flare Time Series Oracle (FTSO)</h2>
<p>The <a href="https://flare.xyz/ftso-a-breakdown/">FTSO</a> provides externally sourced data estimates (e.g., the current price of XRP) to the Flare Network in a decentralized manner.
It does so by leveraging the distributed nature of the network and its participants.
At the moment, only Spark holders get to vote; in the future, each asset's voting power will be split 50-50 between Spark holders and the holders of the particular asset.</p>
<p>Signal providers on the Flare Network are responsible for delivering continuous and accurate data estimates to the FTSO to represent off-chain values on the Flare Network.
Signal providers exist in the off-chain to collect data, such as asset prices, and deliver it to the FTSO.
For example, a provider may collect the price of XRP/$ from three different exchanges, average the price and have this price estimate ready for the FTSO every voting round to submit.
Signal providers can provide their F-Asset and FLR votes to do this, but they also can receive delegated votes from other parties to perform this service on their behalf.
Signal providers may take fees for this service.
Additionally, the entire process is noncustodial (i.e., participants retain complete control of their data).
The FTSO ensures the data is fair, accurate, and available to network applications.</p>
<p>In a nutshell, signal providers submit their votes, which results in a weighted distribution regarding prices at a given time, where the weight is related to the number of tokens held by a given address.
Next, the top and bottom 25% of these votes are deleted, resulting in a truncated distribution.
The oracle estimate is computed as the median of this truncated distribution.
Signal providers get rewarded with FLR tokens if their vote remained in the distribution after truncation.
The signal provider is then responsible for distributing this award between itself and its delegators.</p>
<p>Additional info and implementation details are available in <a href="https://github.com/flare-foundation/FTSO-price-provider">this example of price provider</a>.</p>
<h3 id="delegation">Delegation</h3>
<p>Anyone can submit price data to the FTSO and vote for their price estimate.
Price submission may require effort and technical skills to build such a provider.
Most Spark and F-Asset holders can delegate their tokens to an FTSO provider whom they trust will provide accurate price estimates.
The delegation will be as simple as logging into a Flare wallet, choosing an FTSO provider, and finally selecting the amount tokens they wish to delegate.</p>
<h3 id="rewards">Rewards</h3>
<p>Signal providers receive a reward for accurately voting on prices, as determined by the algorithm.</p>
<p>The top and bottom 25% of prices are discarded, and the remaining average is used.
The 50% of price providers who are closest to the price then receive rewards for their tokens plus the percentage of fees, as defined on the smart contract.
The default is 20%, and they can change it in 5% increments/decrements.</p>
<p>The exact amount of compensation is based on the number of delegated tokens minus a fee set by the FTSO provider.</p>
<p>For example, Alice, Bob, and Charlie choose to delegate their Spark tokens, 1000, 500 &amp; 800 respectively, for a total of 2,300 Spark delegated to FTSO Provider <em>X</em>.
FTSO Provider <em>X</em> submits their price estimate for the round and wins using their proprietary price estimate.
Say 100 Spark is awarded as compensation to FTSO Provider <em>X</em>.
The provider will take 10 Spark as a fee (10%) and divide the rest of the 90 tokens to the delegators based on their stake ratio (delegators stake / total Spark delegated to FTSO Provider <em>X</em>).
Thus, Alice gets 43.5% (39.15 Spark), Bob gets 21.7% (19.53 Spark) and Charlie gets 34.8% (31.32 Spark).
Note: only Spark delegators are compensated, F-Asset votes are not compensated by the FTSO.</p>
<h2 id="f-asset-system">F-Asset System</h2>
<p>The F-Asset System is a critical application on the Flare Network.
It facilitates the trustless issuance of asset values onto the Flare Network.
An F-Asset represents an asset from another blockchain on the Flare Network via the state connector system, i.e., XRP = FXRP.
Agents are responsible for posting and maintaining the FLR collateral.
Additionally, they are responsible for answering redemptions when users decide to have their underlying asset back.
XRP, Litecoin, Dogecoin, and Stellar are the first four F-Assets, and the addition of more is subject to FLR holder governance.</p>
<p>The F-Asset system gives the supported cryptos the capability to run smart contracts without changing the underlying blockchain.
The reason is that nearly 65% of the value on public blockchains cannot be used in a trustless manner with smart contracts.</p>
<p>Two important parties in the F-Asset System are responsible for issuing F-Assets: <em>agents</em> and <em>originators</em>.
An originator is a person or an institution that wants to convert its cryptocurrency into an F-asset.
An agent (more likely to be an institution since they usually hold more assets) is a participant on the Flare network that issues the F-asset desired by the originator.
Agents are also responsible for posting and managing the FLR collateral used to back the minting of F-Assets.
Additionally, as F-Asset holders have the right to claim the underlying asset, the agents are responsible for honoring redemptions promptly.</p>
<p>In the chance of the F-Asset position becoming undercollateralized, the F-Asset System encourages other agents to re-collateralize a failing agent's position via incentives.
If a default were to occur on an F-Asset position, the originator of the F-Assets would be paid out the value of their position in FLR plus an additional amount to cover trading fees to exchange back into their underlying asset.</p>
<p>These external resources contain more detailed information about F-Asset System</p>
<ul>
<li><a href="https://www.alphaoracle.io/flare-network/f-assets">The F-Asset System - Smart Contracts for Everyone</a></li>
<li><a href="https://www.thedefistandard.com/flare-network/f-assets">F-Asset System</a></li>
</ul>
                
              
              
                


              
            </article>
          </div>
        </div>
        
      </main>
      
        
<footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2021 Optakt
          </div>
        
        
          Made with
          <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
            Material for MkDocs
          </a>
        
        
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.sections"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.fcfe8b6d.min.js", "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.b1047164.min.js"></script>
      
    
  </body>
</html>